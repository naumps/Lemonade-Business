# Lemonade Business
### Проектна задача по предметот Визуелно програмирање 
### Изработено од: Мирослав Вучевски (151107) и Наум Поп Стефанија (индекс)

## 1.Опис на апликацијата
   Апликацијата што ја развиваме претставува игра од типот на класичните симулации за развивање на бизнис. Играта претставува симулација на продавница за лимонади. Покрај тоа што играта има едноставен дизајн кој што овозможува едноставност во играњето, овозможено е и зачувување на моменталниот напредок во играта и продолжување на истиот во иднина. Главната идеја за играта е превземена од играта Lemonade Tycoon.

## 2. Упатство за користење

### 2.1 Нова игра (New Game)
   При стартувањето на апликацијата имаме можност да креираме нова продавница (New Game), да ја продолжиме предходно зачуваната игра (Load Game) или да отвориме упатство за тоа како се игра играта (How to play). Кога ќе притиснеме на New Game се отвора нова форма во која треба да го напишеме името на нашата продавница. Откако ќе го напишеме името на продавницата притискаме OK да за ја започнеме играта.

### 2.2 Продолжи ја играта (Load Game)
   Со притискање на ова копче се вчитува предходно зачуваната игра, а доколку корисникот нема залувано игра се појавува известување дека нема зачувана игра. Податоците се серијализирани и се достапни и после исклучувањето на играта.

### 2.3 Помош (How to play)
   Со притискање на ова копче се појавува порака за тоа која е целта на играта и како таа се игра. Кои се факторите кои што влијаат на рецептот како и објаснување на производите за надградба.
    
### 2.4 Правила
   Играта започнува кога ќе ја креираме продавницата, со тоа на играчот му се доделуваат и финансиски средства со кои што треба да купи намирници. Секоја намирница си има своја цена. Откако ќе купи намирници преминува на делот за правење на рецептот. Рецептот се прави на тој начин што се одбира количината на лимони, шеќер и мраз и потоа се одбира колку чаши лимонада сака да направи. Откако ќе го направи рецептот може да го започне денот. Успешноста на рецептот зависи од времето, цената на продуктот и популарноста на продавницата. Според статистиката по завршувањето на денот задача на играчот е да го подобри својот рецепт за зголемување на популарноста на продавницата и зголемување на дневните приходи. Исто така постојат и неколку продукти за надградување на продавницата, со кои се зголемува бројот на купувачи на дневно ниво, се намалува времето за правење лимонада и се зголемува популарноста на продавницата.
    
## 3. Претставување на проблемот

### 3.1 Податочни структури
   Апликацијата има повеќе класи и функции кои многу влијаат во текот на играта. Најглавните податоци и дел од главните функциите се наоѓаат во класата Store. Останатиот дел од главните функциите се наоѓаат во класите Human, Buyer, Recipe и неколку други класи кои ќе бидат објаснети подетално во продолжение.
   
### 3.1.1 Store
   Во класата Store ги дефинираме и чуваме најглавните податоци во играта, како што се името на продавницата (играчот), количините на намирниците кои што играчот ги поседува, нивната цена (која е константна за сите играчи), рецептот, популарноста на продавницата и времето.
   Дел од функциите кои се дефинирани во Store се:
   
   *startDay()* - При започнување на секој денот во зависност од зададениот рецепт се повикува функцијата *calculateRecipe* од класата Recipe со која се пресметуваат шансите (процент) за тоа на колку купувачи би можело да им се допадне лимонадата или не.  
   
   *generatePopularityPeople()* - Во зависност од популарноста на продавницата се пресметува бројката на купувачи за денот што следи.
   
   *Upgrades()* - Со почетокот на денот се повикува и оваа функција која ги извршува ефектите на продуктите за надградување, кои играчот ги поседува.

### 3.1.2 Buyer & NonBuyer
   Класите Buyer и NonBuyer се изведени од класата Human и ги преставуваат луѓето во играта. Покрај заедничките податоци и функции (информации за човекот, Draw() и Move()), класата Buyer има дополнителни податоци и функции. 
   Со помош на класите RandomBuyer и RandomNonBuyers се генерираат (не)купувачи по случаен избор на предходно зададени почетни и крајни координати.
   
### 3.1.3 Recipe   
   Со оваа класа го дефинираме рецептот и алгоритмот со кои што се пресметува квалитетот на рецептот во зависност од критериумите.
   
### 3.2 GUI
   За преставување на мапата по кои се движат луѓето во текот на денот, а и за самите човечиња искористивме готови слика со неколку промени. Преставувањето на анимациите се врши преку функциите во класата Scene.
   
### 3.3 Алгоритми
   За да функционира играта како што е замислена имплементиравме различни алгоритми за генерирање на (не)купувачи, време и валидирање на успешен рецепт во зависност на околностите.
   
### 3.3.1 Почеток на денот (Start Day)  
   Со започнување на денот (клик на копчето *Start Day*) се повикуваат повеќе функции меѓу кои е и функцијата *DayStart()*. Оваа функција е дел од класата Store, а при нејзин повик се повикува *calculateRecipe()* која во зависност од условите го пресметува квалитетот на рецептот и квалитетот на рецептот во одност на цената со помош на следниот алгоритам:
 
        public int calculateRecipe()
        {
            int x = 10;

            if (Leemons != 4)
            {
                x -= Math.Abs(Leemons - 4) * 2;
            }
            if (Sugar != 2)
            {
                x -= Math.Abs(Sugar - 2);
            }
            if (Sunny == true && Ice != 2)
            {
                x -= Math.Abs(Ice - 2);
            }
            if (Sunny == false && Ice != 0)
            {
                x -= Math.Abs(Ice - 2) * 3;
            }

            if (Sugar > 0)
            {
                if (Leemons / Sugar != 2)
                {
                    x -= (Leemons % Sugar);
                }
            }
            else
            {
                x -= (Leemons / 2);
            }

            if (x < 0) x = 0;
            return x;
        }

        public int calculatePriceSatisfaction() {
            decimal x = 0;

            if (Price > 2) {
                x += Math.Abs(Price - 2)*3;
            }


            if (x > 10) x = 10;
            return (int)x;
        }
   
### 3.3.2 Генерирање на (не)купувачи - addNonBuyers & addBuyers
   Функциите *addNonBuyers* и *addBuyers* служат за генерирање на луѓе на почетокот на денот во зависност на одредени услови.
   
#### 3.3.2.1 addNonBuyers
   Со повик на оваа функција се пресметува колку случајни минувачи ќе се генерираат во новиот ден и на кои локации ќе го започнат своето постоење и по кој пат ќе се движат. Бројот на случајни минувачи е одреден според временската прогноза за денот, односно доколку е сончево времето, има поголеми шанси за поголема излезеност.
   
#### 3.3.2.2 addBuyers
   Со повик на оваа функција се пресметува колку купувачи ќе се генерираат во новиот ден и на кои локации ќе го започнат своето постоење и по кој пат ќе се движат. Бројот на купувачи за одреден ден е одреден според бројот на направени лимонади (со зависност од рецептот), популарноста и временската прогноза за денот, односно доколку е имате направено 10 лимонади за тој ден и популарноста ви е околу 50% значи максималниот број на купувачи е 10, а најголема е веројатноста дека околу 5 купувачи ќе имате за тој ден.
   
